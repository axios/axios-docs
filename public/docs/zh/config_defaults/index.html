<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
        默认配置 | Axios Docs
    </title>
    <link rel="stylesheet" href="/index.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css"
        integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous"/>
    <link rel="preload" as="style" onload="this.rel='stylesheet'"
        href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,wght@0,400;0,500;0,700;1,400;1,500;1,700&display=swap"/>

    <link rel="shortcut icon" href="/assets/favicon.ico" type="image/x-icon">
    
    
</head>

<body>
    <header>
        <div></div>
        <div class="left">
            <button id="hamburger">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"
                    id="hamburgerIcon">
                    <path d="M3 8V6H21V8H3Z" fill="currentColor" />
                    <path d="M3 13H21V11H3V13Z" fill="currentColor" />
                    <path d="M3 18H21V16H3V18Z" fill="currentColor" />
                </svg>
            </button>
        </div>
    </header>
    <aside>
        <div>
            <a href="/zh" id="logo">
                <img src="/assets/logo.svg" alt="Logo" />
            </a>
        </div>
        <details class="dropdown-language">
            <summary>
                <div>
                    <img src="/assets/icons/globe.svg" alt=""/>
                    中文
                </div>
                <img id="chevron" src="/assets/icons/chevron-down.svg" alt=""/>
            </summary>
            <div class="options">
                
                    
                        <a href="/docs/config_defaults">English</a>
                    
                
                    
                        <a href="/docs/de/config_defaults">Deutsch</a>
                    
                
                    
                
                    
                
            </div>
        </details>
        <h3 class="group-name">Navigation</h3>
        <a href="/zh">Home</a>
        <nav>
            
                <a href="/docs/intro" class="">
                    Docs
                </a>
                
                <a href="https://github.com/axios/axios" class="">
                    Source
                </a>
                
        </nav>
        
            
                <h3 class="group-name">
                    起步
                </h3>
            
            
        
            
            
                <a href="/docs/zh/intro">
                    介绍
                </a>
            
        
            
            
                <a href="/docs/zh/example">
                    用例
                </a>
            
        
            
            
                <a href="/docs/zh/post_example">
                    POST请求
                </a>
            
        
            
                <h3 class="group-name">
                    Axios API
                </h3>
            
            
        
            
            
                <a href="/docs/zh/api_intro">
                    Axios API
                </a>
            
        
            
            
                <a href="/docs/zh/instance">
                    Axios 实例
                </a>
            
        
            
            
                <a href="/docs/zh/req_config">
                    请求配置
                </a>
            
        
            
            
                <a href="/docs/zh/res_schema">
                    响应结构
                </a>
            
        
            
            
                <a href="/docs/zh/config_defaults">
                    默认配置
                </a>
            
        
            
            
                <a href="/docs/zh/interceptors">
                    拦截器
                </a>
            
        
            
            
                <a href="/docs/zh/handling_errors">
                    错误处理
                </a>
            
        
            
            
                <a href="/docs/zh/cancellation">
                    取消请求
                </a>
            
        
            
            
                <a href="/docs/zh/urlencoded">
                    请求体编码
                </a>
            
        
            
                <h3 class="group-name">
                    其他
                </h3>
            
            
        
            
            
                <a href="/docs/zh/notes">
                    注意事项
                </a>
            
        
    </aside>
    <main>
        <div class="body">
            <h1 class="title">
                默认配置
            </h1>
            <p class="description">
                
            </p>
            <h2 id="默认配置">默认配置</h2>
<p>您可以指定默认配置，它将作用于每个请求。</p>
<h3 id="全局-axios-默认值">全局 axios 默认值</h3>
<pre data-lang="js"><code>axios<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>baseURL <span class="token operator">=</span> <span class="token string">'https://api.example.com'</span><span class="token punctuation">;</span>
axios<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>common<span class="token punctuation">[</span><span class="token string">'Authorization'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token constant">AUTH_TOKEN</span><span class="token punctuation">;</span>
axios<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>post<span class="token punctuation">[</span><span class="token string">'Content-Type'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'application/x-www-form-urlencoded'</span><span class="token punctuation">;</span></code></pre><h3 id="自定义实例默认值">自定义实例默认值</h3>
<pre data-lang="js"><code><span class="token comment">// 创建实例时配置默认值</span>
<span class="token keyword">const</span> instance <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  baseURL<span class="token operator">:</span> <span class="token string">'https://api.example.com'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 创建实例后修改默认值</span>
instance<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>common<span class="token punctuation">[</span><span class="token string">'Authorization'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token constant">AUTH_TOKEN</span><span class="token punctuation">;</span></code></pre><h3 id="配置的优先级">配置的优先级</h3>
<p>配置将会按优先级进行合并。它的顺序是：在<a href="https://github.com/axios/axios/blob/master/lib/defaults.js#L28">lib/defaults.js</a>中找到的库默认值，然后是实例的 <code>defaults</code> 属性，最后是请求的 <code>config</code> 参数。后面的优先级要高于前面的。下面有一个例子。</p>
<pre data-lang="js"><code><span class="token comment">// 使用库提供的默认配置创建实例</span>
<span class="token comment">// 此时超时配置的默认值是 `0`</span>
<span class="token keyword">const</span> instance <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 重写库的超时默认值</span>
<span class="token comment">// 现在，所有使用此实例的请求都将等待2.5秒，然后才会超时</span>
instance<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>timeout <span class="token operator">=</span> <span class="token number">2500</span><span class="token punctuation">;</span>

<span class="token comment">// 重写此请求的超时时间，因为该请求需要很长时间</span>
instance<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/longRequest'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  timeout<span class="token operator">:</span> <span class="token number">5000</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
            <div class="links">
                
                    <a href="/docs/zh/res_schema" class="next-link">
                        <span>« Previous</span>
                        <span class="l">
                            响应结构
                        </span>
                    </a>
                
                
                    <a href="/docs/zh/interceptors" class="next-link">
                        <span>Next »</span>
                        <span class="l">
                            拦截器
                        </span>
                    </a>
                
            </div>
        </div>
        <div class="col-right"></div>
    </main>

    <script>
        document.querySelector('#hamburger').addEventListener('click', (e) => {
            document.body.classList.toggle('show-aside');
        });
    </script>
</body>

</html>
